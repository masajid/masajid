<nav class="d-md-none mb-3 navbar navbar-expand-md navbar-light bg-light rounded fixed-top">
  <%= link_to current_account.mosque, root_path, class: 'navbar-brand' %>
  <button class='navbar-toggler p-0 border-0' type='button' data-toggle='offcanvas'>
    <span class='navbar-toggler-icon'></span>
  </button>

  <div class='navbar-collapse offcanvas-collapse' id='smallDeviceMenu'>
    <ul class='navbar-nav'>
      <% menu_items.each do |menu_item| %>
        <% children = menu_item.children %>

        <% if children.present? %>
          <li class='nav-item dropdown'>
            <a class='nav-link dropdown-toggle' href='#' id='dropdown<%= menu_item.id %>' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
              <%= menu_item.name %>
            </a>
            <div class='dropdown-menu' aria-labelledby='dropdown<%= menu_item.id %>'>
              <% children.each do |child_item| %>
                <%= link_to child_item.name, page_url(child_item.permalink), class: 'dropdown-item' %>
              <% end %>
            </div>
          </li>
        <% else %>
          <li class='nav-item'>
            <%= link_to menu_item.name, page_url(menu_item.permalink), class: 'nav-link' %>
          </li>
        <% end %>
      <% end %>

      <li class='nav-item'>
        <%= link_to Content::Configuration.human_attribute_name(:about_us), about_path, class: 'nav-link' %>
      </li>

      <li class='nav-item'>
        <%= link_to t('shared.volunteers.new.header'), new_volunteer_path, class: 'nav-link' %>
      </li>
    </ul>

    <!--
    <form class="form-inline mt-2 mt-md-0">
      <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
      <button class="btn btn-outline-info my-2 my-sm-0" type="submit">Search</button>
    </form>-->
  </div>
</nav>

<header class='d-none d-md-block py-3'>
  <div class='row flex-nowrap justify-content-between align-items-center'>
    <div class='col-4 pt-1'>
      <%= link_to Content::Configuration.human_attribute_name(:about_us), about_path, class: 'text-muted mr-3' %>
      <%= link_to t('shared.volunteers.new.header'), new_volunteer_path, class: 'text-muted' %>
    </div>

    <div class='col-4 text-center'>
      <%= link_to root_path, class: 'header-logo text-dark' do %>
        <% if current_account.logo.attached? %>
          <%= image_tag main_app.url_for(current_account.configuration.logo.variant(resize: '200x')) %>
        <% else %>
          <%= current_account.mosque %>
        <% end %>
      <% end %>
    </div>

    <div class='col-4 d-flex justify-content-end align-items-center'>
      <!--
      <a class='text-muted' href='#'>
        <svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' class='mx-3' role='img' viewBox='0 0 24 24' focusable='false'><title>Search</title><circle cx='10.5' cy='10.5' r='7.5'/><path d='M21 21l-5.2-5.2'/></svg>
      </a>-->
    </div>
  </div>
</header>

<% if menu_items.any? %>
  <nav class="d-none d-md-block mb-3 navbar navbar-expand-lg navbar-light bg-light rounded">
    <button class='navbar-toggler collapsed' type='button' data-toggle='collapse' data-target='#menu' aria-controls='menu' aria-expanded='false' aria-label='Toggle navigation'>
      <span class='navbar-toggler-icon'></span>
    </button>

    <div class='collapse navbar-collapse justify-content-md-center' id='menu'>
      <ul class='navbar-nav'>
        <% menu_items.each do |menu_item| %>
          <% children = menu_item.children %>

          <% if children.present? %>
            <li class='nav-item dropdown'>
              <a class='nav-link dropdown-toggle' href='#' id='dropdown<%= menu_item.id %>' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
                <%= menu_item.name %>
              </a>
              <div class='dropdown-menu' aria-labelledby='dropdown<%= menu_item.id %>'>
                <% children.each do |child_item| %>
                  <%= link_to child_item.name, page_url(child_item.permalink), class: 'dropdown-item' %>
                <% end %>
              </div>
            </li>
          <% else %>
            <li class='nav-item'>
              <%= link_to menu_item.name, page_url(menu_item.permalink), class: 'nav-link' %>
            </li>
          <% end %>
        <% end %>
      </ul>
    </div>
  </nav>
<% end %>
